<!DOCTYPE HTML>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- Apple iOS and Android stuff (do not remove) -->
<meta name="apple-mobile-web-app-capable" content="no" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />

<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" />


<!-- Required Stylesheets -->
<link rel="stylesheet" type="text/css" href="<?=$css?>/reset.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/text.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/fonts/ptsans/stylesheet.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/fluid.css" media="screen" />

<link rel="stylesheet" type="text/css" href="<?=$css?>/mws.style.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/icons/16x16.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/icons/24x24.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/icons/32x32.css" media="screen" />

<!-- Demo and Plugin Stylesheets -->
<link rel="stylesheet" type="text/css" href="<?=$css?>/demo.css" media="screen" />
<!-- <link rel="stylesheet" type="text/css" href="<?=$css?>/demo-overlay.css" media="screen" /> -->

<link rel="stylesheet" type="text/css" href="<?=$plugins?>/colorpicker/colorpicker.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/imgareaselect/css/imgareaselect-default.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/fullcalendar/fullcalendar.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/fullcalendar/fullcalendar.print.css" media="print" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/chosen/chosen.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/prettyphoto/css/prettyPhoto.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/tipsy/tipsy.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/sourcerer/Sourcerer-1.2.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/jgrowl/jquery.jgrowl.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/fileinput/css/fileinput.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/spinner/ui.spinner.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/timepicker/timepicker.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$css?>/jui/jquery.ui.css" media="screen" />

<!-- Theme Stylesheet -->
<link rel="stylesheet" type="text/css" href="<?=$css?>/mws.theme.css" media="screen" />

<!-- JavaScript Plugins -->
<script type="text/javascript" src="<?=$js?>/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="<?=$js?>/jquery.mousewheel-min.js"></script>

<!-- jQuery-UI Dependent Scripts -->
<script type="text/javascript" src="<?=$js?>/jquery-ui.js"></script>
<script type="text/javascript" src="<?=$plugins?>/spinner/ui.spinner.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/timepicker/timepicker-min.js"></script>
<script type="text/javascript" src="<?=$js?>/jquery.ui.touch-punch.min.js"></script>

<!-- Plugin Scripts -->
<script type="text/javascript" src="<?=$plugins?>/imgareaselect/jquery.imgareaselect.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/duallistbox/jquery.dualListBox-1.3.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/jgrowl/jquery.jgrowl-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/fileinput/js/jQuery.fileinput.js"></script>
<script type="text/javascript" src="<?=$plugins?>/fullcalendar/fullcalendar.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/datatables/jquery.dataTables-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/chosen/chosen.jquery.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/prettyphoto/js/jquery.prettyPhoto-min.js"></script>
<!--[if lt IE 9]>
<script type="text/javascript" src="<?=$plugins?>/flot/excanvas.min.js"></script>
<![endif]-->
<script type="text/javascript" src="<?=$plugins?>/flot/jquery.flot.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/flot/jquery.flot.pie.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/flot/jquery.flot.stack.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/flot/jquery.flot.resize.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/colorpicker/colorpicker-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/tipsy/jquery.tipsy-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/sourcerer/Sourcerer-1.2-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/placeholder/jquery.placeholder-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/validate/jquery.validate-min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/loading-overlay.js"></script>

<script type="text/javascript" src="<?=$plugins?>/elrte/js/elrte.min.js"></script>
<script type="text/javascript" src="<?=$plugins?>/elfinder/js/elfinder.min.js"></script>

<link rel="stylesheet" type="text/css" href="<?=$plugins?>/elrte/css/elrte.full.css" media="screen" />
<link rel="stylesheet" type="text/css" href="<?=$plugins?>/elfinder/css/elfinder.css" media="screen" />

<!-- Core Script -->
<script type="text/javascript" src="<?=$js?>/mws.js"></script>

<!-- Themer Script (Remove if not needed) -->
<script type="text/javascript" src="<?=$js?>/themer.js"></script>

<!-- Demo Scripts (remove if not needed) -->
<script type="text/javascript" src="<?=$js?>/demo.js"></script>
<script type="text/javascript" src="<?=$js?>/demo.formelements.js"></script>
<script type="text/javascript" src="<?=$js?>/demo.charts.js"></script>



<title>Dashboard</title>

</head>

<body>

	

	<!-- Header -->
	<div id="mws-header" class="clearfix">
    
    	<!-- Logo Container -->
    	<div id="mws-logo-container">
        
        	<!-- Logo Wrapper, images put within this wrapper will always be vertically centered -->
        	<div id="mws-logo-wrap">
            	<h3 class="nama_po" style="color:#C5D52B; text-transform:uppercase; margin-top:11px; font-size:16px;"> <?php echo $this->session->userdata('nama_user')?></h3>
			</div>
        </div>
        
        <!-- User Tools (notifications, logout, profile, change password) -->
        <div id="mws-user-tools" class="clearfix">
            
            <!-- User Information and functions section -->
            <div id="mws-user-info" class="mws-inset">
            
            	<!-- User Photo -->
            	<div id="mws-user-photo">
                	<img src="<?=$css?>/../example/profile.jpg" alt="User Photo" />
                </div>
                
                <!-- Username and Functions -->
                <div id="mws-user-functions">
                    <div id="mws-username">
                        Hello, <?php echo $this->session->userdata('nama_user')?>
                    </div>
                    <ul>
                    	<li><a href="profile">Profile</a></li>
                        <li><a href="#">Change Password</a></li>
                        <li><a href="login/f_logout">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Start Main Wrapper -->
    <div id="mws-wrapper">
    
    	<!-- Necessary markup, do not remove -->
		<div id="mws-sidebar-stitch"></div>
		<div id="mws-sidebar-bg"></div>
        
        <!-- Sidebar Wrapper -->
        <div id="mws-sidebar">
        
        	<!-- Searchbox -->
        	<div id="mws-searchbox" class="mws-inset">
            	<form action="http://www.malijuthemeshop.com/themes/mws-admin/1.3/typography.html">
                	<input type="text" class="mws-search-input" />
                    <input type="submit" class="mws-search-submit" />
                </form>
            </div>
            
            <!-- Main Navigation -->
            <div id="mws-navigation">
            	<ul>
                	<li <?php if ($this->uri->segment(1)=='dashboard') {echo 'class="active"'; } ?>><a href="dashboard" class="mws-i-24 i-home">Dashboard</a></li>
                	<li <?php if ($this->uri->segment(1)=='reporting') {echo 'class="active"'; } ?>><a href="reporting" class="mws-i-24 i-chart">Reporting</a></li>
                	<li <?php if ($this->uri->segment(1)=='maps') {echo 'class="active"'; } ?>><a href="maps" class="mws-i-24 i-day-calendar">Maps</a></li>
                	<li <?php if ($this->uri->segment(1)=='manage_track' || $this->uri->segment(1)=='manage_posisi_kota') {echo 'class="active"'; } ?>><a href="manage_track" class="mws-i-24 i-file-cabinet">Manage Track</a></li>
                	<li <?php if ($this->uri->segment(1)=='manage_bus') {echo 'class="active"'; } ?>><a href="manage_bus" class="mws-i-24 i-file-cabinet">Manage Bus</a></li>
                	
                    <li <?php if ($this->uri->segment(1)=='profile') {echo 'class="active"'; } ?>><a href="profile" class="mws-i-24 i-table-1">Profile</a></li>
                	<li <?php if ($this->uri->segment(1)=='superadmin') {echo 'class="active"'; } ?>><a href="superadmin" class="mws-i-24 i-cog">Superadmin</a></li>
                	
                </ul>
            </div>            
        </div>
        
        <!-- Main Container Start -->
        <div id="mws-container" class="clearfix">
        
        	<!-- Inner Container Start -->
          	<div class="container">
            <?php
            $uri = $this->uri->segment(1);
            if($uri=='' || $uri=='dashboard'){
            $this->load->view('adminmobitick/v_dashboard_home');
            }
			
			elseif($uri=='reporting'){
		$secondUri = $this->uri->segment(2);
		if($secondUri == 'todayTransaction' || $secondUri == 'allTransaction')
			$this->load->view('adminmobitick/v_reporting_detail');
		else
	            	$this->load->view('adminmobitick/v_reporting');
            }
			/*elseif($uri=='reporting_mingguan'){
            $this->load->view('adminmobitick/v_reporting_mingguan');
            }
			elseif($uri=='reporting_bulanan'){
            $this->load->view('adminmobitick/v_reporting_bulanan');
            }
			elseif($uri=='reporting_tahunan'){
            $this->load->view('adminmobitick/v_reporting_tahunan');
            }*/
			elseif($uri=='maps'){
            $this->load->view('adminmobitick/v_maps');
            }
			elseif($uri=='manage_track'){
            $this->load->view('adminmobitick/v_manage_track');
            }
			elseif($uri=='manage_posisi_kota'){
            $this->load->view('adminmobitick/v_manage_posisi_kota');
            }
			elseif($uri=='manage_bus'){
            $this->load->view('adminmobitick/v_manage_bus');
            }
			elseif($uri=='profile'){
            $this->load->view('adminmobitick/v_profile');
            }
			elseif($uri=='superadmin'){
            $this->load->view('adminmobitick/v_super_admin');
            }
			
			
           else{
		  	echo 'lainnya';
            }	
			
			
        ?>
            
            
            </div>
            <!-- Inner Container End -->
                       
            <!-- Footer -->
            <div id="mws-footer">
            	Copyright 2013-<?php echo date('Y');?> | Bandung Techno Park - Immersa Labs - Comodo Studio
            </div>
            
        </div>
        <!-- Main Container End -->
        
    </div>
<style>
@media only screen and (max-width:600px) {
	#mws-logo-wrap { display:none !important;}
}
@media only screen and (max-width:1290px) {
	.harga { margin-left:25%;}
}
</style>
<script>
	function add_track(){
	//hiddenAddTrack();
	$('#load_addtrack').slideDown("slow");
	$('#load_addkota').slideDown("slow");
	}
	function show_detailrute(id_rute){
	$('#load_detailrute').load('<?=$base_url;?>manage_track/load_detailrute/'+id_rute, function( response, status, xhr ) {
		if(xhr.readyState != 4)
		{
			$('#load_detailrute').loadingOverlay();
		}
		else
		{
			$('#load_detailrute').loadingOverlay('remove');
		}
	}).fadeIn("slow");
	}
	function edit_kota(id_kota){
	$('#load_editkota').load('<?=$base_url;?>manage_posisi_kota/load_editkota/'+id_kota).slideDown("slow");
	}
	function edit_bus(id_bus){
	$('#load_editbus').load('<?=$base_url;?>manage_bus/load_editbus/'+id_bus).slideDown("slow");
	}

	function reset_track(){
		$('.form-1').find('#pool_asal_chzn').find('span').html('Pool Asal');
		$('.form-1').find('#pool_tujuan_chzn').find('span').html('Pool Tujuan');

		$('#pool_asal').val(0);
		$('#pool_tujuan').val(0);

		for(var i=toShow-1; i > 1; i--)
		{
			close_field(i);
		}
		for(var i=toShowb-1; i > 1; i--)
		{
			close_fieldb(i);
		}
		while(n > 2)
		{
			prev();
			console.log(n);
		}
	}
	
	function edit_track(id_track){
		show_detailrute(id_track);
		add_track();
		$('.mws-form').attr('action','manage_track/edit_track');
		$('[name="submitType"]').val('edit');
		$('[name="trackID"]').val(id_track);
		var rute1 = $($('#load_detailrute').children()[0]);
		var rute2 = $($('#load_detailrute').children()[1]);
		var asal, tujuan;
		var trimmedRute = $($('#load_detailrute').children()[0]).find('span').html().replace(/ /g,'');
		var splitted = trimmedRute.split('-');
		asal = splitted [0];
		tujuan = splitted [1];
		$('.form-1').find('#pool_asal_chzn').find('span').html(asal);
		$('.form-1').find('#pool_tujuan_chzn').find('span').html(tujuan);
		$('#pool_asal').children().each(function(idx,data){
			if($(data).html().replace(/ /g,'') == asal)
			{
				$('#pool_asal').val(idx);
				return false;
			}
		});
		$('#pool_tujuan').children().each(function(idx,data){
			if($(data).html().replace(/ /g,'') == tujuan)
			{
				$('#pool_tujuan').val(idx);
				return false;
			}
		});
		var arrayKota1 = rute1.find('li');
		var arrayKota2 = rute2.find('li');
		$(arrayKota1).each(function(i,val){
			var parentIdx = i;
			var namaKota = $(val).html();
			$('#form_'+(i+1)).find('a').find('span').html(namaKota);
			$('#form_'+(i+1)).find('select').children().each(function(i,val){if($(val).html() == namaKota) {$('#form_'+(parentIdx + 1)).find('select').val(i);return false;}});
			if(i != 0)
			{
				$('#add_item').click();
				var harga;
				$.ajax({url: "http://mobitick.comodostudio.com/REST/harga_lokasi_trayek/idTrayek/"+id_track+"/idLokasiAwal/"+$('#form_'+(i)).find('select').val()+"/idLokasiTujuan/"+$('#form_'+(i+1)).find('select').val()})
					.done(function( data ) {						
						$('[name="harga'+(i+1)+'"]').val(data['harga']);	
				});
			}
			
		});
		$(arrayKota2).each(function(i,val){
			var parentIdx = i;
			var namaKota = $(val).html();
			$('#formb_'+(i+1)).find('a').find('span').html(namaKota);
			$('#formb_'+(i+1)).find('select').children().each(function(i,val){if($(val).html() == namaKota) {$('#formb_'+(parentIdx + 1)).find('select').val(i);return false;}});
			if(i != 0)
			{
				$('#add_itemb').click();
				var harga;
				$.ajax({url: "http://mobitick.comodostudio.com/REST/harga_lokasi_trayek/idTrayek/"+(id_track+1)+"/idLokasiAwal/"+$('#formb_'+(i)).find('select').val()+"/idLokasiTujuan/"+$('#formb_'+(i+1)).find('select').val()})
					.done(function( data ) {						
						$('[name="hargab'+(i+1)+'"]').val(data['harga']);	
				});
			}
		});
	}
	
	function hiddenEditBus(){
	$('#load_editbus').slideUp(600);	
	}
	function hiddenRute(){
	$('#load_detailrute').slideUp(600);	
	}
	function hiddenAddTrack(){
	reset_track();
	$('[name="submitType"]').val('add');
	$('.mws-form').attr('action','manage_track/input_track');
	$('#load_addtrack').slideUp(600);	
	$('#load_addkota').slideUp(600);	
	}
	
	function add_bus(){
	$('#load_addbus').slideDown(600);	
	}
	function hiddenAddBus(){
	$('#load_addbus').slideUp(600);	
	}
	
	function hiddenEditKota(){
	$('#load_editkota').slideUp(600);	
	}
	function confirmDeleteKota(id){
		if (confirm('Anda yakin ingin menghapus kota ini?')) {
			window.parent.parent.window.location = "<?=$base_url;?>manage_posisi_kota/load_deletekota/"+id;
		}
	}
	function confirmDeleteBus(id){
		if (confirm('Anda yakin ingin menghapus bus ini?')) {
			window.parent.parent.window.location = "<?=$base_url;?>manage_bus/deletebus/"+id;
		}
	}


	function close_field(id){	
		if(id==(toShow-1)){
			$('#form_'+id).fadeOut(600);
			toShow = toShow-1;
			$("#jlh_trayekmaju").val(toShow-1);
			//$("#jlh_trayekmaju").val(toShow);
			$("#change_pool_asal_"+id).val('');
			$("#change_pool_asal_"+id+"_chzn").find('span').html('Select an Option');
			$("#harga"+id).val('');
			console.log(toShow);
		}
		else 
			{alert('Hapus dari yang terbawah!');
		}
	}
	function close_fieldb(id){
		if(id==(toShowb-1)){
			$('#formb_'+id).fadeOut(600);
			toShowb = toShowb-1;	
			$("#jlh_trayekbalik").val(toShowb-1);
			//$("#jlh_trayekbalik").val(toShowb);
			$("#change_pool_tujuan_"+id).val('');
			$("#change_pool_tujuan_"+id+"_chzn").find('span').html('Select an Option');
			$("#hargab"+id).val('');
			console.log(toShowb);
		}
		else 
			{alert('Hapus dari yang terbawah!');
		}
	}
		
	n = 2;
	function next(){	
	// Cek Pool Asal dan Tujuan
	var pool_asal= document.getElementById('pool_asal').value;;
	var pool_tujuan= document.getElementById('pool_tujuan').value;;
	var nama_pool_asal = document.getElementById('pool_asal').options[pool_asal].text;
	var nama_pool_tujuan = document.getElementById('pool_tujuan').options[pool_tujuan].text
	$('.form-2').find('#form_1').find('.chzn-results').find('#change_pool_asal_1_chzn_o_'+pool_asal).addClass("result-selected");
	$('.form-2').find('#form_1').find('.chzn-single').children('span').html(nama_pool_asal);
	$('.form-3').find('#formb_1').find('.chzn-results').find('#change_pool_asal_1_chzn_o_'+pool_tujuan).addClass("result-selected");
	$('.form-3').find('#formb_1').find('.chzn-single').children('span').html(nama_pool_tujuan);
	//console.log(nama_pool_asal );
	//console.log(nama_pool_tujuan );
	if(pool_asal==0 || pool_tujuan==0){
	alert ('Isi terlebih dahulu Pool Asal dan Pool Tujuan!');
	return false;	
	}
	
	// Next	Click
	if(n==1 || n==0){
		$('.form-1').fadeIn(600);	
		$('.form-2').slideUp(600);	
		$('.form-3').slideUp(600);	
		$('.form-4').slideUp(600);
		$('.prev').hide();	
		$('ul li.current.satu').addClass('active');
		$('ul li.current.dua').removeClass('active');
		$('ul li.current.tiga').removeClass('active');
		$('ul li.current.empat').removeClass('active');
	}
	else if(n==2){
		$('.form-1').slideUp(600);	
		$('.form-2').fadeIn(600);	
		$('.form-3').slideUp(600);	
		$('.form-4').slideUp(600);
		$('.prev').show();	
		$('ul li.current.satu').removeClass('active');
		$('ul li.current.dua').addClass('active');
		$('ul li.current.tiga').removeClass('active');
		$('ul li.current.empat').removeClass('active');
	}
	else if(n==3){
		$('.form-1').slideUp(600);	
		$('.form-2').slideUp(600);	
		$('.form-3').fadeIn(600);	
		$('.form-4').slideUp(600);	
		$('.prev').show();	
		$('ul li.current.satu').removeClass('active');
		$('ul li.current.dua').removeClass('active');
		$('ul li.current.tiga').addClass('active');
		$('ul li.current.empat').removeClass('active');
	}
	else {
		$('.form-1').slideUp(600);	
		$('.form-2').slideUp(600);	
		$('.form-3').slideUp(600);	
		$('.form-4').fadeIn(600);	
		$('.prev').show();
		$('#buttonnext').attr("disabled","disabled").removeClass('next');
		$('ul li.current.satu').removeClass('active');
		$('ul li.current.dua').removeClass('active');
		$('ul li.current.tiga').removeClass('active');
		$('ul li.current.empat').addClass('active');
	}
	n++;
	}
	
	function prev(){
	$('#buttonnext').removeAttr("disabled","disabled").addClass('next');
	n--;
	if(n==2){
		$('.form-1').fadeIn(600);	
		$('.form-2').slideUp(600);	
		$('.form-3').slideUp(600);	
		$('.form-4').slideUp(600);
		$('.prev').hide();	
		$('ul li.current.satu').addClass('active');
		$('ul li.current.dua').removeClass('active');
		$('ul li.current.tiga').removeClass('active');
		$('ul li.current.empat').removeClass('active');
	}
	else if(n==3){
		$('.form-1').slideUp(600);	
		$('.form-2').fadeIn(600);	
		$('.form-3').slideUp(600);	
		$('.form-4').slideUp(600);	
		$('ul li.current.satu').removeClass('active');
		$('ul li.current.dua').addClass('active');
		$('ul li.current.tiga').removeClass('active');
		$('ul li.current.empat').removeClass('active');
	}
	else {
		$('.form-1').slideUp(600);	
		$('.form-2').slideUp(600);	
		$('.form-3').fadeIn(600);	
		$('.form-4').slideUp(600);	
		$('ul li.current.satu').removeClass('active');
		$('ul li.current.dua').removeClass('active');
		$('ul li.current.tiga').addClass('active');
		$('ul li.current.empat').removeClass('active');
		
	}
	
	}
	

</script>

</body>
</html>